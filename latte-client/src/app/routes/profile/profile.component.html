@if(confirmToggle) {
  <app-dialog [message]="message" (state)="trigger($event)"/>
} 

<div class="w-full p-8 flex flex-col gap-4">
  <div class="flex flex-col gap-1">
    <h1 class="text-2xl text-neutral-800 font-semibold">Profile</h1>
    <span class="text-base text-neutral-800">The information is related to your account so be careful while updating</span>
  </div>
  
  <div class="bg-white rounded-sm border-[.1em] border-gray-200 p-4">
    <form [formGroup]="updateForm" (ngSubmit)="onUpdate()">
      <div class="flex flex-col gap-1">
        <label class="text-sm text-neutral-800" for="firstname">Firstname</label>
        <input class="text-base text-neutral-800 border-[.1em] border-gray-200 px-2 py-1 rounded-sm outline-none focus:border-lime-500" type="text" id="firstname" [value]="update?.firstname" (input)="changeFirstname(firstname.value)" placeholder="Enter firstname for user..." formControlName="firstname" #firstname>
        @if(updateFormErrors && (updateControls['firstname'].errors && updateControls['firstname'].errors['required'])) {
          <span class="text-sm text-red-600">*Required firstname</span>
        }
      </div>
    
      <div class="flex flex-col gap-1 my-4">
        <label class="text-sm text-neutral-800" for="email">Email</label>
        <input class="text-base text-neutral-800 border-[.1em] border-gray-200 px-2 py-1 rounded-sm outline-none focus:border-lime-500" type="text" id="email" [value]="update?.email" (input)="changeEmail(email.value)" placeholder="Enter email for user..." formControlName="email" #email>
        @if(updateFormErrors && (updateControls['email'].errors && updateControls['email'].errors['required'])) {
          <span class="text-sm text-red-600">*Required email address</span>
        }
        @if(updateFormErrors && (updateControls['email'].errors && updateControls['email'].errors['email'])) {
          <span class="text-sm text-red-600">*Enter valid email address</span>
        }
      </div>
    
      <button class="text-base font-medium px-2 py-1 bg-lime-500 border-[.1em] border-lime-500 text-white rounded-sm cursor-pointer hover:bg-lime-600 hover:border-lime-600 disabled:bg-gray-400 disabled:border-gray-400 disabled:cursor-auto" [disabled]="!isUpdated">Save</button>  
    </form>
  </div>

  @if(resetToggle) {
    <div class="bg-white rounded-sm border-[.1em] border-gray-200 p-4">
      <h1 class="text-2xl font-medium mb-4">Reset Password</h1>
  
      <form [formGroup]="resetForm" (ngSubmit)="onReset()">
        <div class="flex flex-col gap-1 my-4">
          <label class="text-sm" for="updatedPassword">Updated Password</label>
          <app-password [id]="'updatedPassword'" [placeholder]="'Enter updated password'" formControlName="updatedPassword"/>
          @if(resetFormErrors && (resetControls['updatedPassword'].errors && resetControls['updatedPassword'].errors['required'])) {
            <span class="text-sm text-red-500">*Required password</span>
          }
          @if(resetFormErrors && (resetControls['updatedPassword'].errors && resetControls['updatedPassword'].errors['minlength'])) {
            <span class="text-sm text-red-500">*Pasword must have minimum 8 character</span>
          }
        </div>
  
        <div class="flex flex-col gap-1 my-4">
          <label class="text-sm" for="confirmPassword">Confirm Password</label>
          <app-password [id]="'confirmPassword'" [placeholder]="'Confirm password'" formControlName="confirmPassword"/>
          @if(resetFormErrors && (resetControls['confirmPassword'].errors && resetControls['confirmPassword'].errors['required'])) {
            <span class="text-sm text-red-600">*Required password</span>
          }
          @if(resetFormErrors && (resetControls['confirmPassword'].errors && resetControls['confirmPassword'].errors['minlength'])) {
            <span class="text-sm text-red-600">*Pasword must have minimum 8 character</span>
          }
          @if(resetFormErrors && (!resetControls['confirmPassword'].errors && resetControls['confirmPassword'].value !== resetControls['updatedPassword'].value)) {
            <span class="text-sm text-red-600">*Update password and Confirm password not match</span>
          }
        </div>
  
        <div class="flex gap-4">
          <button class="text-base font-medium px-2 py-1 bg-lime-500 border-[.1em] border-lime-500 text-white rounded-sm cursor-pointer hover:bg-lime-600 hover:border-lime-600">Reset</button>
          <button class="text-base font-medium px-2 py-1 bg-white border-[.1em] border-lime-500 text-lime-500 rounded-sm cursor-pointer hover:bg-gray-100" type="button" (click)="toggleReset()">Cancel</button>
        </div>
      </form>
    </div>
  }

  <div class="flex gap-2">
    @if(!resetToggle) {
      <button class="text-base font-medium px-2 py-1 bg-transparent border-[.1em] border-lime-500 text-lime-500 rounded-sm cursor-pointer hover:bg-gray-200" type="button" (click)="toggleReset()">Reset Password</button>
    }
    <button class="text-base font-medium px-2 py-1 bg-red-500 border-[.1em] border-red-500 text-white rounded-sm cursor-pointer hover:bg-red-600 hover:border-red-600" type="button" (click)="logout()">Logout</button>
  </div>
</div>